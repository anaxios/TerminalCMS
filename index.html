<!doctype html>
<html>
  <head>
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE" />
    <!-- stop browser from caching while testing -->
    <!-- <meta name="viewport" content="user-scalable=0" /> -->
    <!-- make ios not zoom when keyboard pops up -->
    <script
      src="https://unpkg.com/htmx.org@1.9.10"
      integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/json-enc.js"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/class-tools.js"></script>
    <script src="https://unpkg.com/htmx.org@1.4.1/dist/ext/client-side-templates.js"></script>
    <script src="https://unpkg.com/mustache@latest"></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
    <!-- Alpine Plugins -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@alpinejs/focus@3.x.x/dist/cdn.min.js"
    ></script>

    <!-- Alpine Core -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <title>J3NKN5.CC</title>
  </head>
  <body class="crt bg-emerald-950" hx-ext="client-side-templates">
    <!-- MAIN CONSOLE WINDOW -->
    <div
      id="consoleWindow"
      class="flex flex-col place-content-between max-h-screen h-screen max-w-screen-lg bg-emerald-950 pl-4 pr-4 font-apple text-zinc-400"
    >
      <div
        id="menu"
        class="bg-white py-1 font-apple border-b-2 border-black relative fixed max-w-screen-lg"
        hx-trigger="load"
        hx-get="menu.html"
        hx-swaps="innerHTML"
      ></div>
      <div
        id="content"
        hx-get="pages/intro"
        hx-trigger="load"
        class="grow overflow-auto whitespace-pre-wrap"
      ></div>

      <div
        class="flex-none bg-emerald-950 inset-x-0 bottom-0 bg-inheret pt-1 mb-2 sticky"
      >
        <div class="flex bg-inheret">
          <span class="">]</span>
          <!-- <span class="animate-pulse" hx-ext="class-tools" classes="toggle CursorBlink:700ms" style="visibility:visible;">&block;</span> -->
          <input
            type="text"
            class="crt bg-emerald-950 focus:bg-emerald-950 hover:bg-emerald-950 autofill:bg-emerald-950 carot-white w-full focus:outline-none focus:ring-0 focus:border-transparent"
            id="textBoxInputElement"
            hx-get="https://api.j3nkn5.cc/"
            hx-trigger="keydown[keyCode==13]"
            hx-target="#content"
            hx-indicator="#spinner"
            hx-swap="beforeend scroll:bottom transition:true"
            hx-vals='{"llm": "true", "vectors": "true"}'
            mustache-template="foo"
            name="query"
            placeholder="Type your question here."
          />
        </div>
      </div>
    </div>
    <template id="foo">
      <span>___________________________</span>
      <p>ANSWER: {{query}}</p>
      <!-- prettier-ignore -->
      <p>VECTORS: 
        {{#vector}} 
        {{pageContent}} 
        {{metadata.filename}}<br/>
        {{/vector}}
      </p>
    </template>
  </body>
</html>
